{"ast":null,"code":"import _objectSpread from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{EditOutlined,DeleteOutlined,AttachFileOutlined,GifBoxOutlined,ImageOutlined,MicOutlined,MoreHorizOutlined}from\"@mui/icons-material\";import{Box,Divider,Typography,InputBase,useTheme,Button,IconButton,useMediaQuery}from\"@mui/material\";import FlexBetween from\"components/FlexBetween\";import Dropzone from\"react-dropzone\";import UserImage from\"components/UserImage\";import WidgetWrapper from\"components/WidgetWrapper\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPosts}from\"state\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MyPostWidget=function MyPostWidget(_ref){var picturePath=_ref.picturePath;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isImage=_useState2[0],setIsImage=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),image=_useState4[0],setImage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),post=_useState6[0],setPost=_useState6[1];var _useTheme=useTheme(),palette=_useTheme.palette;var _useSelector=useSelector(function(state){return state.user;}),_id=_useSelector._id;var token=useSelector(function(state){return state.token;});var isNonMobileScreens=useMediaQuery(\"(min-width: 1000px)\");var mediumMain=palette.neutral.mediumMain;var medium=palette.neutral.medium;var handlePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var formData,response,posts;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData();formData.append(\"userId\",_id);formData.append(\"description\",post);if(image){formData.append(\"picture\",image);formData.append(\"picturePath\",image.name);}_context.next=6;return fetch(\"http://localhost:3001/posts\",{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)},body:formData});case 6:response=_context.sent;_context.next=9;return response.json();case 9:posts=_context.sent;dispatch(setPosts({posts:posts}));setImage(null);setPost(\"\");case 13:case\"end\":return _context.stop();}}},_callee);}));return function handlePost(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(WidgetWrapper,{children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1.5rem\",children:[/*#__PURE__*/_jsx(UserImage,{image:picturePath}),/*#__PURE__*/_jsx(InputBase,{placeholder:\"What's on your mind...\",onChange:function onChange(e){return setPost(e.target.value);},value:post,sx:{width:\"100%\",backgroundColor:palette.neutral.light,borderRadius:\"2rem\",padding:\"1rem 2rem\"}})]}),isImage&&/*#__PURE__*/_jsx(Box,{border:\"1px solid \".concat(medium),borderRadius:\"5px\",mt:\"1rem\",p:\"1rem\",children:/*#__PURE__*/_jsx(Dropzone,{acceptedFiles:\".jpg,.jpeg,.png\",multiple:false,onDrop:function onDrop(acceptedFiles){return setImage(acceptedFiles[0]);},children:function children(_ref3){var getRootProps=_ref3.getRootProps,getInputProps=_ref3.getInputProps;return/*#__PURE__*/_jsxs(FlexBetween,{children:[/*#__PURE__*/_jsxs(Box,_objectSpread(_objectSpread({},getRootProps()),{},{border:\"2px dashed \".concat(palette.primary.main),p:\"1rem\",width:\"100%\",sx:{\"&:hover\":{cursor:\"pointer\"}},children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({},getInputProps())),!image?/*#__PURE__*/_jsx(\"p\",{children:\"Add Image Here\"}):/*#__PURE__*/_jsxs(FlexBetween,{children:[/*#__PURE__*/_jsx(Typography,{children:image.name}),/*#__PURE__*/_jsx(EditOutlined,{})]})]})),image&&/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setImage(null);},sx:{width:\"15%\"},children:/*#__PURE__*/_jsx(DeleteOutlined,{})})]});}})}),/*#__PURE__*/_jsx(Divider,{sx:{margin:\"1.25rem 0\"}}),/*#__PURE__*/_jsxs(FlexBetween,{children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.25rem\",onClick:function onClick(){return setIsImage(!isImage);},children:[/*#__PURE__*/_jsx(ImageOutlined,{sx:{color:mediumMain}}),/*#__PURE__*/_jsx(Typography,{color:mediumMain,sx:{\"&:hover\":{cursor:\"pointer\",color:medium}},children:\"Image\"})]}),isNonMobileScreens?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.25rem\",children:[/*#__PURE__*/_jsx(GifBoxOutlined,{sx:{color:mediumMain}}),/*#__PURE__*/_jsx(Typography,{color:mediumMain,children:\"Clip\"})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.25rem\",children:[/*#__PURE__*/_jsx(AttachFileOutlined,{sx:{color:mediumMain}}),/*#__PURE__*/_jsx(Typography,{color:mediumMain,children:\"Attachment\"})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.25rem\",children:[/*#__PURE__*/_jsx(MicOutlined,{sx:{color:mediumMain}}),/*#__PURE__*/_jsx(Typography,{color:mediumMain,children:\"Audio\"})]})]}):/*#__PURE__*/_jsx(FlexBetween,{gap:\"0.25rem\",children:/*#__PURE__*/_jsx(MoreHorizOutlined,{sx:{color:mediumMain}})}),/*#__PURE__*/_jsx(Button,{disabled:!post,onClick:handlePost,sx:{color:palette.background.alt,backgroundColor:palette.primary.main,borderRadius:\"3rem\"},children:\"POST\"})]})]});};export default MyPostWidget;","map":{"version":3,"names":["EditOutlined","DeleteOutlined","AttachFileOutlined","GifBoxOutlined","ImageOutlined","MicOutlined","MoreHorizOutlined","Box","Divider","Typography","InputBase","useTheme","Button","IconButton","useMediaQuery","FlexBetween","Dropzone","UserImage","WidgetWrapper","useState","useDispatch","useSelector","setPosts","MyPostWidget","picturePath","dispatch","isImage","setIsImage","image","setImage","post","setPost","palette","state","user","_id","token","isNonMobileScreens","mediumMain","neutral","medium","handlePost","formData","FormData","append","name","fetch","method","headers","Authorization","body","response","json","posts","e","target","value","width","backgroundColor","light","borderRadius","padding","acceptedFiles","getRootProps","getInputProps","primary","main","cursor","margin","color","background","alt"],"sources":["C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/src/scenes/widgets/MyPostWidget.jsx"],"sourcesContent":["import {\n  EditOutlined,\n  DeleteOutlined,\n  AttachFileOutlined,\n  GifBoxOutlined,\n  ImageOutlined,\n  MicOutlined,\n  MoreHorizOutlined,\n} from \"@mui/icons-material\";\nimport {\n  Box,\n  Divider,\n  Typography,\n  InputBase,\n  useTheme,\n  Button,\n  IconButton,\n  useMediaQuery,\n} from \"@mui/material\";\nimport FlexBetween from \"components/FlexBetween\";\nimport Dropzone from \"react-dropzone\";\nimport UserImage from \"components/UserImage\";\nimport WidgetWrapper from \"components/WidgetWrapper\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setPosts } from \"state\";\n\nconst MyPostWidget = ({ picturePath }) => {\n  const dispatch = useDispatch();\n  const [isImage, setIsImage] = useState(false);\n  const [image, setImage] = useState(null);\n  const [post, setPost] = useState(\"\");\n  const { palette } = useTheme();\n  const { _id } = useSelector((state) => state.user);\n  const token = useSelector((state) => state.token);\n  const isNonMobileScreens = useMediaQuery(\"(min-width: 1000px)\");\n  const mediumMain = palette.neutral.mediumMain;\n  const medium = palette.neutral.medium;\n\n  const handlePost = async () => {\n    const formData = new FormData();\n    formData.append(\"userId\", _id);\n    formData.append(\"description\", post);\n    if (image) {\n      formData.append(\"picture\", image);\n      formData.append(\"picturePath\", image.name);\n    }\n\n    const response = await fetch(`http://localhost:3001/posts`, {\n      method: \"POST\",\n      headers: { Authorization: `Bearer ${token}` },\n      body: formData,\n    });\n    const posts = await response.json();\n    dispatch(setPosts({ posts }));\n    setImage(null);\n    setPost(\"\");\n  };\n\n  return (\n    <WidgetWrapper>\n      <FlexBetween gap=\"1.5rem\">\n        <UserImage image={picturePath} />\n        <InputBase\n          placeholder=\"What's on your mind...\"\n          onChange={(e) => setPost(e.target.value)}\n          value={post}\n          sx={{\n            width: \"100%\",\n            backgroundColor: palette.neutral.light,\n            borderRadius: \"2rem\",\n            padding: \"1rem 2rem\",\n          }}\n        />\n      </FlexBetween>\n      {isImage && (\n        <Box\n          border={`1px solid ${medium}`}\n          borderRadius=\"5px\"\n          mt=\"1rem\"\n          p=\"1rem\"\n        >\n          <Dropzone\n            acceptedFiles=\".jpg,.jpeg,.png\"\n            multiple={false}\n            onDrop={(acceptedFiles) => setImage(acceptedFiles[0])}\n          >\n            {({ getRootProps, getInputProps }) => (\n              <FlexBetween>\n                <Box\n                  {...getRootProps()}\n                  border={`2px dashed ${palette.primary.main}`}\n                  p=\"1rem\"\n                  width=\"100%\"\n                  sx={{ \"&:hover\": { cursor: \"pointer\" } }}\n                >\n                  <input {...getInputProps()} />\n                  {!image ? (\n                    <p>Add Image Here</p>\n                  ) : (\n                    <FlexBetween>\n                      <Typography>{image.name}</Typography>\n                      <EditOutlined />\n                    </FlexBetween>\n                  )}\n                </Box>\n                {image && (\n                  <IconButton\n                    onClick={() => setImage(null)}\n                    sx={{ width: \"15%\" }}\n                  >\n                    <DeleteOutlined />\n                  </IconButton>\n                )}\n              </FlexBetween>\n            )}\n          </Dropzone>\n        </Box>\n      )}\n\n      <Divider sx={{ margin: \"1.25rem 0\" }} />\n\n      <FlexBetween>\n        <FlexBetween gap=\"0.25rem\" onClick={() => setIsImage(!isImage)}>\n          <ImageOutlined sx={{ color: mediumMain }} />\n          <Typography\n            color={mediumMain}\n            sx={{ \"&:hover\": { cursor: \"pointer\", color: medium } }}\n          >\n            Image\n          </Typography>\n        </FlexBetween>\n\n        {isNonMobileScreens ? (\n          <>\n            <FlexBetween gap=\"0.25rem\">\n              <GifBoxOutlined sx={{ color: mediumMain }} />\n              <Typography color={mediumMain}>Clip</Typography>\n            </FlexBetween>\n\n            <FlexBetween gap=\"0.25rem\">\n              <AttachFileOutlined sx={{ color: mediumMain }} />\n              <Typography color={mediumMain}>Attachment</Typography>\n            </FlexBetween>\n\n            <FlexBetween gap=\"0.25rem\">\n              <MicOutlined sx={{ color: mediumMain }} />\n              <Typography color={mediumMain}>Audio</Typography>\n            </FlexBetween>\n          </>\n        ) : (\n          <FlexBetween gap=\"0.25rem\">\n            <MoreHorizOutlined sx={{ color: mediumMain }} />\n          </FlexBetween>\n        )}\n\n        <Button\n          disabled={!post}\n          onClick={handlePost}\n          sx={{\n            color: palette.background.alt,\n            backgroundColor: palette.primary.main,\n            borderRadius: \"3rem\",\n          }}\n        >\n          POST\n        </Button>\n      </FlexBetween>\n    </WidgetWrapper>\n  );\n};\n\nexport default MyPostWidget;\n"],"mappings":"mrBAAA,OACEA,YAAY,CACZC,cAAc,CACdC,kBAAkB,CAClBC,cAAc,CACdC,aAAa,CACbC,WAAW,CACXC,iBAAiB,KACZ,qBAAqB,CAC5B,OACEC,GAAG,CACHC,OAAO,CACPC,UAAU,CACVC,SAAS,CACTC,QAAQ,CACRC,MAAM,CACNC,UAAU,CACVC,aAAa,KACR,eAAe,CACtB,MAAOC,YAAW,KAAM,wBAAwB,CAChD,MAAOC,SAAQ,KAAM,gBAAgB,CACrC,MAAOC,UAAS,KAAM,sBAAsB,CAC5C,MAAOC,cAAa,KAAM,0BAA0B,CACpD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,QAAQ,KAAQ,OAAO,CAAC,6IAEjC,GAAMC,aAAY,CAAG,QAAfA,aAAY,MAAwB,IAAlBC,YAAW,MAAXA,WAAW,CACjC,GAAMC,SAAQ,CAAGL,WAAW,EAAE,CAC9B,cAA8BD,QAAQ,CAAC,KAAK,CAAC,wCAAtCO,OAAO,eAAEC,UAAU,eAC1B,eAA0BR,QAAQ,CAAC,IAAI,CAAC,yCAAjCS,KAAK,eAAEC,QAAQ,eACtB,eAAwBV,QAAQ,CAAC,EAAE,CAAC,yCAA7BW,IAAI,eAAEC,OAAO,eACpB,cAAoBpB,QAAQ,EAAE,CAAtBqB,OAAO,WAAPA,OAAO,CACf,iBAAgBX,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACC,IAAI,GAAC,CAA1CC,GAAG,cAAHA,GAAG,CACX,GAAMC,MAAK,CAAGf,WAAW,CAAC,SAACY,KAAK,QAAKA,MAAK,CAACG,KAAK,GAAC,CACjD,GAAMC,mBAAkB,CAAGvB,aAAa,CAAC,qBAAqB,CAAC,CAC/D,GAAMwB,WAAU,CAAGN,OAAO,CAACO,OAAO,CAACD,UAAU,CAC7C,GAAME,OAAM,CAAGR,OAAO,CAACO,OAAO,CAACC,MAAM,CAErC,GAAMC,WAAU,6FAAG,iKACXC,QAAQ,CAAG,GAAIC,SAAQ,EAAE,CAC/BD,QAAQ,CAACE,MAAM,CAAC,QAAQ,CAAET,GAAG,CAAC,CAC9BO,QAAQ,CAACE,MAAM,CAAC,aAAa,CAAEd,IAAI,CAAC,CACpC,GAAIF,KAAK,CAAE,CACTc,QAAQ,CAACE,MAAM,CAAC,SAAS,CAAEhB,KAAK,CAAC,CACjCc,QAAQ,CAACE,MAAM,CAAC,aAAa,CAAEhB,KAAK,CAACiB,IAAI,CAAC,CAC5C,CAAC,sBAEsBC,MAAK,+BAAgC,CAC1DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAEC,aAAa,kBAAYb,KAAK,CAAG,CAAC,CAC7Cc,IAAI,CAAER,QACR,CAAC,CAAC,QAJIS,QAAQ,qCAKMA,SAAQ,CAACC,IAAI,EAAE,QAA7BC,KAAK,eACX5B,QAAQ,CAACH,QAAQ,CAAC,CAAE+B,KAAK,CAALA,KAAM,CAAC,CAAC,CAAC,CAC7BxB,QAAQ,CAAC,IAAI,CAAC,CACdE,OAAO,CAAC,EAAE,CAAC,CAAC,uDACb,kBAlBKU,WAAU,2CAkBf,CAED,mBACE,MAAC,aAAa,yBACZ,MAAC,WAAW,EAAC,GAAG,CAAC,QAAQ,wBACvB,KAAC,SAAS,EAAC,KAAK,CAAEjB,WAAY,EAAG,cACjC,KAAC,SAAS,EACR,WAAW,CAAC,wBAAwB,CACpC,QAAQ,CAAE,kBAAC8B,CAAC,QAAKvB,QAAO,CAACuB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,CACzC,KAAK,CAAE1B,IAAK,CACZ,EAAE,CAAE,CACF2B,KAAK,CAAE,MAAM,CACbC,eAAe,CAAE1B,OAAO,CAACO,OAAO,CAACoB,KAAK,CACtCC,YAAY,CAAE,MAAM,CACpBC,OAAO,CAAE,WACX,CAAE,EACF,GACU,CACbnC,OAAO,eACN,KAAC,GAAG,EACF,MAAM,qBAAec,MAAM,CAAG,CAC9B,YAAY,CAAC,KAAK,CAClB,EAAE,CAAC,MAAM,CACT,CAAC,CAAC,MAAM,uBAER,KAAC,QAAQ,EACP,aAAa,CAAC,iBAAiB,CAC/B,QAAQ,CAAE,KAAM,CAChB,MAAM,CAAE,gBAACsB,aAAa,QAAKjC,SAAQ,CAACiC,aAAa,CAAC,CAAC,CAAC,CAAC,EAAC,UAErD,4BAAGC,aAAY,OAAZA,YAAY,CAAEC,aAAa,OAAbA,aAAa,oBAC7B,MAAC,WAAW,yBACV,MAAC,GAAG,gCACED,YAAY,EAAE,MAClB,MAAM,sBAAgB/B,OAAO,CAACiC,OAAO,CAACC,IAAI,CAAG,CAC7C,CAAC,CAAC,MAAM,CACR,KAAK,CAAC,MAAM,CACZ,EAAE,CAAE,CAAE,SAAS,CAAE,CAAEC,MAAM,CAAE,SAAU,CAAE,CAAE,wBAEzC,8BAAWH,aAAa,EAAE,EAAI,CAC7B,CAACpC,KAAK,cACL,qCAAqB,cAErB,MAAC,WAAW,yBACV,KAAC,UAAU,WAAEA,KAAK,CAACiB,IAAI,EAAc,cACrC,KAAC,YAAY,IAAG,GAEnB,IACG,CACLjB,KAAK,eACJ,KAAC,UAAU,EACT,OAAO,CAAE,yBAAMC,SAAQ,CAAC,IAAI,CAAC,EAAC,CAC9B,EAAE,CAAE,CAAE4B,KAAK,CAAE,KAAM,CAAE,uBAErB,KAAC,cAAc,IAAG,EAErB,GACW,EACf,EACQ,EAEd,cAED,KAAC,OAAO,EAAC,EAAE,CAAE,CAAEW,MAAM,CAAE,WAAY,CAAE,EAAG,cAExC,MAAC,WAAW,yBACV,MAAC,WAAW,EAAC,GAAG,CAAC,SAAS,CAAC,OAAO,CAAE,yBAAMzC,WAAU,CAAC,CAACD,OAAO,CAAC,EAAC,wBAC7D,KAAC,aAAa,EAAC,EAAE,CAAE,CAAE2C,KAAK,CAAE/B,UAAW,CAAE,EAAG,cAC5C,KAAC,UAAU,EACT,KAAK,CAAEA,UAAW,CAClB,EAAE,CAAE,CAAE,SAAS,CAAE,CAAE6B,MAAM,CAAE,SAAS,CAAEE,KAAK,CAAE7B,MAAO,CAAE,CAAE,mBAG7C,GACD,CAEbH,kBAAkB,cACjB,wCACE,MAAC,WAAW,EAAC,GAAG,CAAC,SAAS,wBACxB,KAAC,cAAc,EAAC,EAAE,CAAE,CAAEgC,KAAK,CAAE/B,UAAW,CAAE,EAAG,cAC7C,KAAC,UAAU,EAAC,KAAK,CAAEA,UAAW,kBAAkB,GACpC,cAEd,MAAC,WAAW,EAAC,GAAG,CAAC,SAAS,wBACxB,KAAC,kBAAkB,EAAC,EAAE,CAAE,CAAE+B,KAAK,CAAE/B,UAAW,CAAE,EAAG,cACjD,KAAC,UAAU,EAAC,KAAK,CAAEA,UAAW,wBAAwB,GAC1C,cAEd,MAAC,WAAW,EAAC,GAAG,CAAC,SAAS,wBACxB,KAAC,WAAW,EAAC,EAAE,CAAE,CAAE+B,KAAK,CAAE/B,UAAW,CAAE,EAAG,cAC1C,KAAC,UAAU,EAAC,KAAK,CAAEA,UAAW,mBAAmB,GACrC,GACb,cAEH,KAAC,WAAW,EAAC,GAAG,CAAC,SAAS,uBACxB,KAAC,iBAAiB,EAAC,EAAE,CAAE,CAAE+B,KAAK,CAAE/B,UAAW,CAAE,EAAG,EAEnD,cAED,KAAC,MAAM,EACL,QAAQ,CAAE,CAACR,IAAK,CAChB,OAAO,CAAEW,UAAW,CACpB,EAAE,CAAE,CACF4B,KAAK,CAAErC,OAAO,CAACsC,UAAU,CAACC,GAAG,CAC7Bb,eAAe,CAAE1B,OAAO,CAACiC,OAAO,CAACC,IAAI,CACrCN,YAAY,CAAE,MAChB,CAAE,kBAGK,GACG,GACA,CAEpB,CAAC,CAED,cAAerC,aAAY"},"metadata":{},"sourceType":"module"}