{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ChatBubbleOutlineOutlined,FavoriteBorderOutlined,FavoriteOutlined,ShareOutlined}from\"@mui/icons-material\";import{Box,Divider,IconButton,Typography,useTheme}from\"@mui/material\";import FlexBetween from\"components/FlexBetween\";import Friend from\"components/Friend\";import WidgetWrapper from\"components/WidgetWrapper\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setPost}from\"state\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostWidget=function PostWidget(_ref){var postId=_ref.postId,postUserId=_ref.postUserId,name=_ref.name,description=_ref.description,location=_ref.location,picturePath=_ref.picturePath,userPicturePath=_ref.userPicturePath,likes=_ref.likes,comments=_ref.comments;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isComments=_useState2[0],setIsComments=_useState2[1];var dispatch=useDispatch();var token=useSelector(function(state){return state.token;});var loggedInUserId=useSelector(function(state){return state.user._id;});var isLiked=Boolean(likes[loggedInUserId]);var likeCount=Object.keys(likes).length;var _useTheme=useTheme(),palette=_useTheme.palette;var main=palette.neutral.main;var primary=palette.primary.main;var patchLike=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,updatedPost;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"http://localhost:3001/posts/\".concat(postId,\"/like\"),{method:\"PATCH\",headers:{Authorization:\"Bearer \".concat(token),\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:loggedInUserId})});case 2:response=_context.sent;_context.next=5;return response.json();case 5:updatedPost=_context.sent;dispatch(setPost({post:updatedPost}));case 7:case\"end\":return _context.stop();}}},_callee);}));return function patchLike(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(WidgetWrapper,{m:\"2rem 0\",children:[/*#__PURE__*/_jsx(Friend,{friendId:postUserId,name:name,subtitle:location,userPicturePath:userPicturePath}),/*#__PURE__*/_jsx(Typography,{color:main,sx:{mt:\"1rem\"},children:description}),picturePath&&/*#__PURE__*/_jsx(\"img\",{width:\"100%\",height:\"auto\",alt:\"post\",style:{borderRadius:\"0.75rem\",marginTop:\"0.75rem\"},src:\"http://localhost:3001/assets/\".concat(picturePath)}),/*#__PURE__*/_jsxs(FlexBetween,{mt:\"0.25rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"1rem\",children:[/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:patchLike,children:isLiked?/*#__PURE__*/_jsx(FavoriteOutlined,{sx:{color:primary}}):/*#__PURE__*/_jsx(FavoriteBorderOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:likeCount})]}),/*#__PURE__*/_jsxs(FlexBetween,{gap:\"0.3rem\",children:[/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(){return setIsComments(!isComments);},children:/*#__PURE__*/_jsx(ChatBubbleOutlineOutlined,{})}),/*#__PURE__*/_jsx(Typography,{children:comments.length})]})]}),/*#__PURE__*/_jsx(IconButton,{children:/*#__PURE__*/_jsx(ShareOutlined,{})})]}),isComments&&/*#__PURE__*/_jsxs(Box,{mt:\"0.5rem\",children:[comments.map(function(comment,i){return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{sx:{color:main,m:\"0.5rem 0\",pl:\"1rem\"},children:comment})]},\"\".concat(name,\"-\").concat(i));}),/*#__PURE__*/_jsx(Divider,{})]})]});};export default PostWidget;","map":{"version":3,"names":["ChatBubbleOutlineOutlined","FavoriteBorderOutlined","FavoriteOutlined","ShareOutlined","Box","Divider","IconButton","Typography","useTheme","FlexBetween","Friend","WidgetWrapper","useState","useDispatch","useSelector","setPost","PostWidget","postId","postUserId","name","description","location","picturePath","userPicturePath","likes","comments","isComments","setIsComments","dispatch","token","state","loggedInUserId","user","_id","isLiked","Boolean","likeCount","Object","keys","length","palette","main","neutral","primary","patchLike","fetch","method","headers","Authorization","body","JSON","stringify","userId","response","json","updatedPost","post","mt","borderRadius","marginTop","color","map","comment","i","m","pl"],"sources":["C:/Users/sabin/Downloads/1/mern-social-media-master/mern-social-media-master/client/src/scenes/widgets/PostWidget.jsx"],"sourcesContent":["import {\n  ChatBubbleOutlineOutlined,\n  FavoriteBorderOutlined,\n  FavoriteOutlined,\n  ShareOutlined,\n} from \"@mui/icons-material\";\nimport { Box, Divider, IconButton, Typography, useTheme } from \"@mui/material\";\nimport FlexBetween from \"components/FlexBetween\";\nimport Friend from \"components/Friend\";\nimport WidgetWrapper from \"components/WidgetWrapper\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setPost } from \"state\";\n\nconst PostWidget = ({\n  postId,\n  postUserId,\n  name,\n  description,\n  location,\n  picturePath,\n  userPicturePath,\n  likes,\n  comments,\n}) => {\n  const [isComments, setIsComments] = useState(false);\n  const dispatch = useDispatch();\n  const token = useSelector((state) => state.token);\n  const loggedInUserId = useSelector((state) => state.user._id);\n  const isLiked = Boolean(likes[loggedInUserId]);\n  const likeCount = Object.keys(likes).length;\n\n  const { palette } = useTheme();\n  const main = palette.neutral.main;\n  const primary = palette.primary.main;\n\n  const patchLike = async () => {\n    const response = await fetch(`http://localhost:3001/posts/${postId}/like`, {\n      method: \"PATCH\",\n      headers: {\n        Authorization: `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ userId: loggedInUserId }),\n    });\n    const updatedPost = await response.json();\n    dispatch(setPost({ post: updatedPost }));\n  };\n\n  return (\n    <WidgetWrapper m=\"2rem 0\">\n      <Friend\n        friendId={postUserId}\n        name={name}\n        subtitle={location}\n        userPicturePath={userPicturePath}\n      />\n      <Typography color={main} sx={{ mt: \"1rem\" }}>\n        {description}\n      </Typography>\n      {picturePath && (\n        <img\n          width=\"100%\"\n          height=\"auto\"\n          alt=\"post\"\n          style={{ borderRadius: \"0.75rem\", marginTop: \"0.75rem\" }}\n          src={`http://localhost:3001/assets/${picturePath}`}\n        />\n      )}\n      <FlexBetween mt=\"0.25rem\">\n        <FlexBetween gap=\"1rem\">\n          <FlexBetween gap=\"0.3rem\">\n            <IconButton onClick={patchLike}>\n              {isLiked ? (\n                <FavoriteOutlined sx={{ color: primary }} />\n              ) : (\n                <FavoriteBorderOutlined />\n              )}\n            </IconButton>\n            <Typography>{likeCount}</Typography>\n          </FlexBetween>\n\n          <FlexBetween gap=\"0.3rem\">\n            <IconButton onClick={() => setIsComments(!isComments)}>\n              <ChatBubbleOutlineOutlined />\n            </IconButton>\n            <Typography>{comments.length}</Typography>\n          </FlexBetween>\n        </FlexBetween>\n\n        <IconButton>\n          <ShareOutlined />\n        </IconButton>\n      </FlexBetween>\n      {isComments && (\n        <Box mt=\"0.5rem\">\n          {comments.map((comment, i) => (\n            <Box key={`${name}-${i}`}>\n              <Divider />\n              <Typography sx={{ color: main, m: \"0.5rem 0\", pl: \"1rem\" }}>\n                {comment}\n              </Typography>\n            </Box>\n          ))}\n          <Divider />\n        </Box>\n      )}\n    </WidgetWrapper>\n  );\n};\n\nexport default PostWidget;\n"],"mappings":"2gBAAA,OACEA,yBAAyB,CACzBC,sBAAsB,CACtBC,gBAAgB,CAChBC,aAAa,KACR,qBAAqB,CAC5B,OAASC,GAAG,CAAEC,OAAO,CAAEC,UAAU,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,eAAe,CAC9E,MAAOC,YAAW,KAAM,wBAAwB,CAChD,MAAOC,OAAM,KAAM,mBAAmB,CACtC,MAAOC,cAAa,KAAM,0BAA0B,CACpD,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,OAAO,KAAQ,OAAO,CAAC,wFAEhC,GAAMC,WAAU,CAAG,QAAbA,WAAU,MAUV,IATJC,OAAM,MAANA,MAAM,CACNC,UAAU,MAAVA,UAAU,CACVC,IAAI,MAAJA,IAAI,CACJC,WAAW,MAAXA,WAAW,CACXC,QAAQ,MAARA,QAAQ,CACRC,WAAW,MAAXA,WAAW,CACXC,eAAe,MAAfA,eAAe,CACfC,KAAK,MAALA,KAAK,CACLC,QAAQ,MAARA,QAAQ,CAER,cAAoCb,QAAQ,CAAC,KAAK,CAAC,wCAA5Cc,UAAU,eAAEC,aAAa,eAChC,GAAMC,SAAQ,CAAGf,WAAW,EAAE,CAC9B,GAAMgB,MAAK,CAAGf,WAAW,CAAC,SAACgB,KAAK,QAAKA,MAAK,CAACD,KAAK,GAAC,CACjD,GAAME,eAAc,CAAGjB,WAAW,CAAC,SAACgB,KAAK,QAAKA,MAAK,CAACE,IAAI,CAACC,GAAG,GAAC,CAC7D,GAAMC,QAAO,CAAGC,OAAO,CAACX,KAAK,CAACO,cAAc,CAAC,CAAC,CAC9C,GAAMK,UAAS,CAAGC,MAAM,CAACC,IAAI,CAACd,KAAK,CAAC,CAACe,MAAM,CAE3C,cAAoB/B,QAAQ,EAAE,CAAtBgC,OAAO,WAAPA,OAAO,CACf,GAAMC,KAAI,CAAGD,OAAO,CAACE,OAAO,CAACD,IAAI,CACjC,GAAME,QAAO,CAAGH,OAAO,CAACG,OAAO,CAACF,IAAI,CAEpC,GAAMG,UAAS,6FAAG,oLACOC,MAAK,uCAAgC5B,MAAM,UAAS,CACzE6B,MAAM,CAAE,OAAO,CACfC,OAAO,CAAE,CACPC,aAAa,kBAAYnB,KAAK,CAAE,CAChC,cAAc,CAAE,kBAClB,CAAC,CACDoB,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,MAAM,CAAErB,cAAe,CAAC,CACjD,CAAC,CAAC,QAPIsB,QAAQ,qCAQYA,SAAQ,CAACC,IAAI,EAAE,QAAnCC,WAAW,eACjB3B,QAAQ,CAACb,OAAO,CAAC,CAAEyC,IAAI,CAAED,WAAY,CAAC,CAAC,CAAC,CAAC,sDAC1C,kBAXKX,UAAS,2CAWd,CAED,mBACE,MAAC,aAAa,EAAC,CAAC,CAAC,QAAQ,wBACvB,KAAC,MAAM,EACL,QAAQ,CAAE1B,UAAW,CACrB,IAAI,CAAEC,IAAK,CACX,QAAQ,CAAEE,QAAS,CACnB,eAAe,CAAEE,eAAgB,EACjC,cACF,KAAC,UAAU,EAAC,KAAK,CAAEkB,IAAK,CAAC,EAAE,CAAE,CAAEgB,EAAE,CAAE,MAAO,CAAE,UACzCrC,WAAW,EACD,CACZE,WAAW,eACV,YACE,KAAK,CAAC,MAAM,CACZ,MAAM,CAAC,MAAM,CACb,GAAG,CAAC,MAAM,CACV,KAAK,CAAE,CAAEoC,YAAY,CAAE,SAAS,CAAEC,SAAS,CAAE,SAAU,CAAE,CACzD,GAAG,wCAAkCrC,WAAW,CAAG,EAEtD,cACD,MAAC,WAAW,EAAC,EAAE,CAAC,SAAS,wBACvB,MAAC,WAAW,EAAC,GAAG,CAAC,MAAM,wBACrB,MAAC,WAAW,EAAC,GAAG,CAAC,QAAQ,wBACvB,KAAC,UAAU,EAAC,OAAO,CAAEsB,SAAU,UAC5BV,OAAO,cACN,KAAC,gBAAgB,EAAC,EAAE,CAAE,CAAE0B,KAAK,CAAEjB,OAAQ,CAAE,EAAG,cAE5C,KAAC,sBAAsB,IACxB,EACU,cACb,KAAC,UAAU,WAAEP,SAAS,EAAc,GACxB,cAEd,MAAC,WAAW,EAAC,GAAG,CAAC,QAAQ,wBACvB,KAAC,UAAU,EAAC,OAAO,CAAE,yBAAMT,cAAa,CAAC,CAACD,UAAU,CAAC,EAAC,uBACpD,KAAC,yBAAyB,IAAG,EAClB,cACb,KAAC,UAAU,WAAED,QAAQ,CAACc,MAAM,EAAc,GAC9B,GACF,cAEd,KAAC,UAAU,wBACT,KAAC,aAAa,IAAG,EACN,GACD,CACbb,UAAU,eACT,MAAC,GAAG,EAAC,EAAE,CAAC,QAAQ,WACbD,QAAQ,CAACoC,GAAG,CAAC,SAACC,OAAO,CAAEC,CAAC,qBACvB,MAAC,GAAG,yBACF,KAAC,OAAO,IAAG,cACX,KAAC,UAAU,EAAC,EAAE,CAAE,CAAEH,KAAK,CAAEnB,IAAI,CAAEuB,CAAC,CAAE,UAAU,CAAEC,EAAE,CAAE,MAAO,CAAE,UACxDH,OAAO,EACG,aAJF3C,IAAI,aAAI4C,CAAC,EAKhB,EACP,CAAC,cACF,KAAC,OAAO,IAAG,GAEd,GACa,CAEpB,CAAC,CAED,cAAe/C,WAAU"},"metadata":{},"sourceType":"module"}